import { useEffect, useState } from "react";import { addScore, addHistory } from "../utils/storage";const letters = ["A","B","C","D","E","F","G","H"];function shuffle(arr){return arr.slice().sort(()=>Math.random()-0.5);}export default function Memory(){const [cards,setCards]=useState([]);const [flipped,setFlipped]=useState([]);const [matched,setMatched]=useState([]);useEffect(()=>resetGame(),[]);function resetGame(){const base=shuffle([...letters,...letters]);const arr=base.map((v,i)=>({id:i,val:v}));setCards(arr);setFlipped([]);setMatched([]);}function clickCard(idx){if(flipped.includes(idx)||matched.includes(cards[idx]?.val))return;const newFlipped=[...flipped,idx].slice(-2);setFlipped(newFlipped);if(newFlipped.length===2){const a=cards[newFlipped[0]].val,b=cards[newFlipped[1]].val;if(a===b){setMatched(prev=>[...prev,a]);addScore("Memory",1);addHistory("Memory","Matched "+a);}setTimeout(()=>setFlipped([]),700);}}return (<div className="container"><div className="card"><h2>Memory Match</h2><div style={{display:"grid",gridTemplateColumns:"repeat(4,1fr)",gap:10}}>{cards.map((c,i)=>{const isFlipped=flipped.includes(i)||matched.includes(c.val);return (<div key={c.id} className={"cell "+(isFlipped?"":"disabled")} onClick={()=>clickCard(i)} style={{height:80,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20}}>{isFlipped?c.val:"?"}</div>);})}</div><div style={{marginTop:12}}><button className="btn" onClick={resetGame}>Reset</button></div></div></div>);}